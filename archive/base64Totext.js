const { createWorker } = require ('tesseract.js');
const fs = require("fs")

let base64 = `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`;
let imageBuffer = Buffer.from(base64, "base64");

fs.writeFileSync('new-path.png', imageBuffer);

const worker = createWorker({
    logger: m => console.log(m)
});

(async () => {
    await worker.load();
    await worker.loadLanguage('eng');
    await worker.initialize('eng');
    console.log("Recognizing...");
    const { data: { text } } = await worker.recognize(imageBuffer);
    console.log("Recognized text:", text);
    await worker.terminate();
    
})();